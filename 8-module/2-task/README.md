# Учебный проект: Корзина, часть 1

"Корзина" — компонент интерфейса онлайн-магазина или ресторана, который используется для визуализации процесса добавления товаров для заказа.

В нашем проекте данный интерфейс состоит из двух частей:

- Компонент `CartIcon` ("Иконка корзины") — его мы реализовали ранее
- Компонент `Cart` ("Корзина") — он отвечает за добавление и удаление блюд, а также за отправление заказа на сервер.

Компонент `Cart` достаточно сложный, поэтому мы разбили его на две части. В этой задаче мы начнем работу над ним.

## Основа класса

```js
export default class Cart {
  cartItems = []; // (1) [product: {...}, count: N]

  constructor(cartIcon) { // (2)
    this.cartIcon = cartIcon;
  }

  onProductUpdate(cartItem) { // (3)
    this.cartIcon.update(this);
  }
}
```

1. Список блюд будем хранить в свойстве `cartItems` (детали ниже).
2. В качестве аргумента в конструктор класса передаётся экземпляр компонента `CartIcon`. Это нужно для того, чтобы управлять иконкой корзины и обновлять количество заказанных блюд в ней.
3. Метод `onProductUpdate` вызываем при обновлении количества блюд, сейчас он обновляет `cartIcon`, позже мы добавим больше функций.

### Формат хранения блюд в cartItems

Одно и то же блюдо может быть добавлено несколько раз, поэтому нам нужно кроме объекта блюда хранить общее количество.

Объекты блюд мы будем хранить в массиве, в свойстве нашего компонента — `cartItems`.
Каждое блюдо в массиве представлено специальным объектом, в свойстве `product` которого хранится объект данного блюда, а в свойстве `count` — количество единиц данного блюда:

```js
this.cartItems = [
  {
    // Объект блюда
    product: {
        name: "Laab kai chicken salad", // название блюда
        price: 10, // цена блюда
        category: "salads", // категория блюда
        image: "laab_kai_chicken_salad.png", // картинка блюда (из папки assets)
        id: "laab-kai-chicken-salad" // внутренний идентификатор блюда
    },
    count: 2 // Количество заказов
  },

  // ...другие блюда
];
```

Объект внутри свойства `product` имеет такую же структуру, как объект блюда из задачи про `ProductCard`.

## Реализуйте следующие методы

Допишите методы, описанные ниже, так, чтобы они соответствовали требованиям.
Пример использования находится в файле `index.html`.

### addProduct(product)

Добавляет товар в корзину, будет вызываться внешним кодом.

В качестве аргумента принимает объект блюда вида:

```js
let product = {
  name: "Laab kai chicken salad", // название товара
  price: 10, // цена товара
  category: "salads",
  image: "laab_kai_chicken_salad.png",
  id: "laab-kai-chicken-salad"
};

cart.addProduct(product);
```

**Требования к реализации метода:**

1. Если блюда еще нет в корзине, то добавить его в массив `cartItems` со значением `count` равным `1`:
2. Если блюдо уже есть в корзине, то увеличить его количество на единицу.
3. Обновить элемент `cartItem` путём вызова метода `onProductUpdate`:

```js
export default class Cart {
  // ...
  addProduct(product) {
    // ...

    // cartItem — обновлённый/вновь созданный элемент cartItems
    this.onProductUpdate(cartItem);
  }
}
```

Также в реализации этого метода необходимо учесть ситуацию, когда блюдо не существует.
Например, если метод вызван со значением `product === null` или вообще без аргумента, то в корзину ничего добавлять не нужно, а код не должен генерировать ошибку.

```js
cart.addProduct();
cart.addProduct(null); 
// Ничего не добавляется, при этом код не генерирует ошибку
```

Чтобы этого достичь, нужно добавить дополнительную проверку в начало метода.

### updateProductCount(productId, amount)

Этот метод меняет количество заказов данного блюда.
Он будет вызываться при нажатии на специальные кнопки внутри корзины.

Метод принимает два аргумента:

1. `productId` — уникальный идентификатор блюда, который есть у каждого блюда и хранится в свойстве `id` в соответствующем объекте.
2. `amount` — число для изменения количества заказов блюда, `1` — если нужно увеличить на единицу, `-1` — если нужно уменьшить на единицу.

**Требования к реализации метода:**

1. Обновить количество заказов блюда в массиве `cartItems`.
2. Если после изменения количества заказов блюда, количество равно `0`, то это блюдо нужно удалить из корзины.
3. Обновить элемент `cartItem` путём вызова метода `onProductUpdate`:

```js
export default class Cart {
  // ...
  updateProductCount(productId, amount) {
    // ...

    // cartItem — обновлённый элемент cartItems
    this.onProductUpdate(cartItem);
  }
}
```

### Метод isEmpty()

Возвращает `true` если корзина пуста и `false` если в корзине есть хотя бы один заказ.

```js
let cart = new Cart(cartIcon);

cart.isEmpty(); // true/false
```

### Метод getTotalCount()

Возвращает общее количество заказов в корзине.
Обратите внимание, что один заказ может быть добавлен несколько раз и это нужно учесть.

```js
let cart = new Cart(cartIcon);

cart.getTotalCount(); // количество всех заказов
```

### Метод getTotalPrice()

Возвращает стоимость всех блюд в корзине.
Для этого нужно суммировать значения цен всех заказов с учетом количества каждого из них.
Цену блюда можно найти в свойстве `price` объекта блюда.

Помните, что одно и то же блюдо может быть добавлено более одного раза.

```js
let cart = new Cart(cartIcon);

cart.getTotalPrice(); // стоимость заказов
```
