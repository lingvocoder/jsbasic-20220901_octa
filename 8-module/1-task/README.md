# –£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç: –ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã

"–ö–æ—Ä–∑–∏–Ω–∞" ‚Äì –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–Ω–ª–∞–π–Ω –º–∞–≥–∞–∑–∏–Ω–∞ –∏–ª–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç —Ç–æ–≤–∞—Ä—ã –¥–ª—è –∑–∞–∫–∞–∑–∞.

–í –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –æ–Ω–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π.
–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å ‚Äì –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "–ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã".
–û–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –∏—Å—á–µ–∑–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.
–í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ñ–∞–π–ª `sum.js`, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–ª–∞—Å—Å `CartIcon`, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.
–°–µ–π—á–∞—Å –≤ –Ω—ë–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ "–æ—Ç—Ä–∏—Å–æ–≤–∫–∞" –∫–æ—Ä–∑–∏–Ω—ã.
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—ë –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ, —á—Ç–æ–±—ã –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –≤—Å–µ–≥–¥–∞ –±—ã–ª–∞ –≤–∏–¥–Ω–∞.

–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª `index.mjs`:

```js
import createElement from './create-element.js';

export default class CartIcon {
  constructor() {
    this.render();
    this.addEventListeners();
  }

  // –û—Ç—Ä–∏—Å–æ–≤–∞—Ç—å –ø—É—Å—Ç—É—é –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã
  render() {
    this.elem = createElement('<div class="cart-icon"></div>');
  }

  // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –µ—ë –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ cart (–æ–±—ä—è—Å–Ω–µ–Ω–æ –Ω–∏–∂–µ)
  update(cart) {
    if (!cart.isEmpty()) {
      this.elem.classList.add('cart-icon_visible');

      this.elem.innerHTML = `
        <div class="cart-icon__inner">
          <span class="cart-icon__count">${cart.getTotalCount()}</span>
          <span class="cart-icon__price">‚Ç¨${cart.getTotalPrice().toFixed(2)}</span>
        </div>`;

      this.updatePosition();

      this.elem.classList.add('shake');
      this.elem.addEventListener('transitionend', () => {
        this.elem.classList.remove('shake');
      }, {once: true});

    } else {
      this.elem.classList.remove('cart-icon_visible');
    }
  }

  addEventListeners() {
    document.addEventListener('scroll', () => this.updatePosition());
    window.addEventListener('resize', () => this.updatePosition());
  }

  // –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  updatePosition() {
    // –≤–∞—à –∫–æ–¥ ...
  }
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã:

```js
// —Å–æ–∑–¥–∞—ë–º –∏–∫–æ–Ω–∫—É
let cartIcon = new CartIcon();

// –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
document.body.append(cartIcon.elem);

// –¥–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä–∑–∏–Ω—ã
cartIcon.update(cart);
```

–î–∞–≤–∞–π—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –º–µ—Ç–æ–¥ `update(cart)`.

## –ú–µ—Ç–æ–¥ update(cart)

–ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∏—Ö –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏.
–°–∞–º–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ –∫–æ—Ä–∑–∏–Ω—ã `cart`.
–£ –Ω–µ–≥–æ –µ—Å—Ç—å —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞:

```js
let cart = {
  isEmpty() {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –µ—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞, false ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç
  },

  getTotalCount() {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
  },

  getTotalPrice() {
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â—É—é —Å—É–º–º—É –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
  }
}
```

–ï—Å–ª–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤, –≤–Ω–µ—à–Ω–∏–π –∫–æ–¥ —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –æ–±—ä–µ–∫—Ç–µ `cart` —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –º–µ—Ç–æ–¥—ã `isEmpty`, `getTotalCount`, `getTotalPrice` –Ω–∞—á–∏–Ω–∞—é—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. 
–ü–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `cartIcon.update(cart)`, –∫–æ—Ç–æ—Ä—ã–π –≤–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã.

–†–µ–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `cart` –º—ã —Å–¥–µ–ª–∞–µ–º —á—É—Ç—å –ø–æ–∑–∂–µ.
–í —Ñ–∞–π–ª–µ `index.html` –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ç–∞–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä–∑–∏–Ω—ã.

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤ —Ñ–∞–π–ª–µ `index.html`, –±–∞–∑–æ–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–ù–æ –µ—Å–ª–∏ –º—ã –ø—Ä–æ–∫—Ä—É—Ç–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω–∏–∑, —Ç–æ —É–≤–∏–¥–∏–º, —á—Ç–æ –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞–≤–µ—Ä—Ö—É –∏ —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π.
–•–æ—Ç–µ–ª–æ—Å—å –±—ã, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥–µ–ª–∏ –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω–∞ —Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ –ø—Ä–æ–∫—Ä—É—Ç–∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
–≠—Ç–æ –≤–∞–º –∏ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å.

## –ú–µ—Ç–æ–¥ updatePosition()

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `updatePosition()`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –≤–Ω–∏–∑ –∏, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–µ–ª–∞—Ç—å –µ—ë –≤–∏–¥–∏–º–æ–π, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É.
–í –∫–æ–¥–µ `CartIcon`, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –µ—Å—Ç—å, —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `update` –∏ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π `scroll` –∏ `resize` (–æ–Ω–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ `addEventListeners`).
–¢–æ –µ—Å—Ç—å, –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥ –Ω–µ –Ω—É–∂–Ω–æ.
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ –∫–æ–¥.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—é:

–ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ —Ç–æ–≤–∞—Ä–æ–≤.
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞.
–ü–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã **–≤–∏–¥–Ω–∞** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä–∏–≤ –º–µ—Ç—Ä–∏–∫–∏ `offsetHeight` –∏–ª–∏ `offsetWidth` –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ [–†–∞–∑–º–µ—Ä—ã –∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: offsetWidth/Height](https://learn.javascript.ru/size-and-scroll#offsetwidth-height)

–ù–∞—á–∏–Ω–∞—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã –Ω—É–∂–Ω–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤–µ—Ä—Ö–Ω–∏–π –∫—Ä–∞–π –∏–∫–æ–Ω–∫–∏ –ø–µ—Ä–µ—Å—ë–∫ –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ.

**–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏:**
- –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –¥–æ–ª–∂–Ω–∞ –æ—Ç—Å—Ç–æ—è—Ç—å –Ω–∞ `50px` –æ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è —ç–∫—Ä–∞–Ω–∞.

**–ü–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –∏–∫–æ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞:**
- –æ—Ç—Å—Ç–æ—è—Ç—å –Ω–∞ `20px` —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ —Å –∫–ª–∞—Å—Å–æ–º `container`.
- –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –±–ª–∏–∂–µ `10px` –æ—Ç –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è –æ–∫–Ω–∞.

–ï—Å–ª–∏ —à–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ `767px`, —Ç–æ **–ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ –Ω—É–∂–Ω–æ –≤–æ–≤—Å–µ**. 
–≠—Ç–æ —Å–≤—è–∑–∞–Ω–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏ —Ç–∞–∫–æ–π —à–∏—Ä–∏–Ω–µ —É –Ω–∞—Å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ "–º–æ–±–∏–ª—å–Ω—ã–µ" —Å—Ç–∏–ª–∏.
–í—ã —Å–∞–º–∏ –º–æ–∂–µ—Ç–µ –≤ —ç—Ç–æ–º —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

–£–≤–∏–¥–µ—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –≤ –¥–µ–π—Å—Ç–≤–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–∞ <https://course-jsbasic.javascript.ru>.

***
__–í–∞–∂–Ω–æ!__

–í —Å–≤—è–∑–∏ —Å —Ç–µ–º, —á—Ç–æ —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ—à–µ–Ω–æ –º–Ω–æ–≥–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –µ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. 
–ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å —Å–∏—Ç—É–∞—Ü–∏–µ–π, –∫–æ–≥–¥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ, –Ω–æ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç, –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å
–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é –∑–∞ –ø–æ–º–æ—â—å—é.

## –ü–æ–¥—Å–∫–∞–∑–∫–∞

–î–∞–ª–µ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–µ—à–∞—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É.
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–µ —á–∏—Ç–∞–π—Ç–µ –¥–∞–ª—å—à–µ üòâ

### –ö–∞–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —É—Å—Ç—Ä–æ–µ–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏?

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–∫—Ä—É—Ç–∏–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã, 
—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å –µ–π —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (`position: fixed;`).
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ `position: fixed` - [–≤–æ—Ç —Ç—É—Ç](https://learn.javascript.ru/position#position-fixed).

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏–∫–æ–Ω–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `position: absolute`.
–ú–µ–Ω—è—Ç—å –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ `fixed` –∏ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∏–∫–æ–Ω–∫—É –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ, –∫–æ–≥–¥–∞ –∫—Ä–∞–π –∏–∫–æ–Ω–∫–∏ 
–ø–µ—Ä–µ—Å—ë–∫ –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –æ–∫–Ω–∞.
–ö–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–∫—Ä—É—á–µ–Ω–∞ –≤–≤–µ—Ä—Ö, —Ç–æ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∫–æ—Ä–∑–∏–Ω—É –≤ –ø—Ä–µ–∂–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

–î–ª—è —ç—Ç–æ–≥–æ –∑–∞–ø–æ–º–Ω–∏–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã –∫–æ—Ä–∑–∏–Ω—ã.
–û–Ω–∏ –±—É–¥—É—Ç —Ç–æ—á–∫–æ–π –æ—Ç—Å—á—ë—Ç–∞.
–ö–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–∫—Ä—É—á–µ–Ω–∞ –≤–Ω–∏–∑, –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ `fixed`, –∞ –∫–æ–≥–¥–∞ –≤–≤–µ—Ä—Ö ‚Äî `absolute`:

```js
// —Ç–µ–∫—É—â–∞—è Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–∫–Ω–∞ + —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
let initialTopCoord = this.elem.getBoundingClientRect().top + window.pageYOffset;
```

–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ `updatePosition()`.
–ü–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º—ã –±—É–¥–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å–æ —Å—Ç–µ–ø–µ–Ω—å—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞:

```js
if (window.pageYOffset > initialTopCoord) {
  // –ø–ª–∞–≤–∞—é—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞
} else {
  // –∫–æ—Ä–∑–∏–Ω–∞ —Å–≤–µ—Ä—Ö—É
}
```

–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `window.pageYOffset` –±—É–¥–µ—Ç –±–æ–ª—å—à–µ `initialTopCoordinate`, –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –¥–æ–∫—Ä—É—Ç–∏–ª –¥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã, 
–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –µ—ë –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ, –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.

### –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è:

1. –ó–Ω–∞—á–µ–Ω–∏–µ, –æ—Ç—Å—Ç—É–ø–∞ (`20px`) —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –∫–ª–∞—Å—Å–æ–º `container` –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ. 
–î–ª—è —ç—Ç–æ–≥–æ –≤–æ–∑—å–º—ë–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è —ç—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –∫–ª–∞—Å—Å–æ–º `container` –∏ –ø—Ä–∏–±–∞–≤–∏–º –∫ –Ω–µ–º—É `20px`:

```js
document.querySelector('.container').getBoundingClientRect().right + 20;
```

2. –ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–∞ –æ—Ç –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è —ç–∫—Ä–∞–Ω–∞ (`10px`). 
–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –∏–∑ –æ–±—â–µ–π —à–∏—Ä–∏–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`document.documentElement.clientWidth`) –≤—ã—á–µ—Å—Ç—å —à–∏—Ä–∏–Ω—É –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã(`this.elem.offsetWidth`) –∏ 
—Ä–∞–∑–º–µ—Ä –æ—Ç—Å—Ç—É–ø–∞ –æ—Ç –∫—Ä–∞—è(`10px`), –≤–æ—Ç —Ç–∞–∫:

```js
document.documentElement.clientWidth - this.elem.offsetWidth - 10;
```

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –¥–≤—É—Ö.
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –¥–ª—è –Ω–∞—Å –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ–µ –∏–∑ –Ω–∏—Ö.
–°–¥–µ–ª–∞–µ–º —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é `Math.min`:
```js
let leftIndent = Math.min(
  document.querySelector('.container').getBoundingClientRect().right + 20,
  document.documentElement.clientWidth - this.elem.offsetWidth - 10
) + 'px'
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω—É–∂–Ω–æ:

```js
let leftIndent = Math.min(
  document.querySelector('.container').getBoundingClientRect().right + 20,
  document.documentElement.clientWidth - this.elem.offsetWidth - 10
) + 'px'

Object.assign(this.elem.style, {
  position: 'fixed',
  top: '50px',
  zIndex: 1e3,
  right: '10px',
  left: leftIndent
});
```

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—Å—ë –≤–µ—Ä–Ω—É—Ç—å –≤ –ø—Ä–µ–∂–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–≤–µ—Ä—Ö:

```js
Object.assign(this.elem.style, {
  position: '',
  top: '',
  left: '',
  zIndex: ''
});
```

### –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

–î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π —à–∏—Ä–∏–Ω—ã –æ–∫–Ω–∞ —É –Ω–∞—Å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ —Å—Ç–∏–ª–∏, –≥–¥–µ –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –≤—Å–µ–≥–¥–∞
–ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ.
–ü–æ—ç—Ç–æ–º—É –µ—Å–ª–∏ —à–∏—Ä–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ `767px`, —Ç–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º.
–ß—Ç–æ–±—ã —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–æ–π—Å—Ç–≤–æ `clientWidth` –≤—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:

```js
let isMobile = document.documentElement.clientWidth <= 767;

// –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –æ–±–Ω—É–ª—è–µ–º —Å—Ç–∏–ª–∏ –∫ –∏—Å—Ö–æ–¥–Ω—ã–º
if (document.documentElement.clientWidth <= 767) {
  Object.assign(this.elem.style, {
    position: '',
    top: '',
    left: '',
    zIndex: ''
  });
}
```
